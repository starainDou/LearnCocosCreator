{"version":3,"sources":["assets/Script/Test/TestDelay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;IAAuC,6BAAY;IAAnD;QAAA,qEAiDC;QA/CW,mBAAa,GAAW,CAAC,CAAC;;IA+CtC,CAAC;IA7CU,qBAAW,GAAlB;QACI,UAAU,CAAC;YACP,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QACjC,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,SAAS,CAAC,SAAS,GAAG,UAAU,CAAC;YAC7B,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC;QACzD,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC;IACO,eAAK,GAAZ;QACG,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAC7B,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;QACrD,YAAY,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACtC,CAAC;IAEM,sBAAY,GAAnB;QACI,IAAI,aAAa,GAAG,IAAI,CAAC;QACzB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,aAAa,GAAG,WAAW,CAAC;YACxB,KAAK,EAAE,CAAC;YACR,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,KAAK,GAAG,GAAG,CAAC,CAAC;YACzC,IAAI,KAAK,GAAG,CAAC,EAAE;gBAAE,aAAa,CAAC,aAAa,CAAC,CAAC;aAAE;QACpD,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAEM,sBAAY,GAAnB;QACI,IAAI,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;QAChC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,oBAAoB,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,qBAAqB;QAElF,IAAI,CAAC,eAAe,GAAI,EAAE,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAC,eAAe;QACnE,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAE,0BAA0B;QAC5E,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,qBAAqB,EAAE,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IACpH,CAAC;IACO,wCAAoB,GAA5B;QACI,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,OAAO,CAAC,GAAG,CAAC,kBAAkB,GAAG,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,CAAC;QAC3D,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAC3C,SAAS,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;YACvE,yDAAyD;SAC5D;IACL,CAAC;IACO,yCAAqB,GAA7B;QACI,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAG,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,CAAC;IAChE,CAAC;IACL,gBAAC;AAAD,CAjDA,AAiDC,CAjDsC,EAAE,CAAC,SAAS,GAiDlD;;AACD,6CAA6C;AAC7C,UAAU","file":"","sourceRoot":"/","sourcesContent":["export default class TestDelay extends cc.Component {\n    private static timeIndex: number | undefined;\n    private scheduleIndex: number = 0;\n    private static globalScheduler:cc.Scheduler | undefined;\n    static testTimeOut() {\n        setTimeout(() => {\n            console.log(\"TimeOut延迟1秒执行\");\n        }, 1000);\n        TestDelay.timeIndex = setTimeout(() => {\n            console.log(\"TimeOut延迟2秒执行，会在下一个延时0秒定时中取消，看是否执行到这里\");\n        }, 2000);\n        setTimeout(this.delay);\n    }\n     static delay() {\n        console.log(\"TimeOut延时0秒执行\");\n        console.log(\"取消延迟2秒执行的TimeOut\", TestDelay.timeIndex);\n        clearTimeout(TestDelay.timeIndex);\n    }\n\n    static testInterval() {\n        let intervalIndex = null;\n        let index = 0;\n        intervalIndex = setInterval(() => {\n            index++;\n            console.log('Interval执行第' + index + '次');\n            if (index > 4) { clearInterval(intervalIndex); }\n        }, 1000);\n    }\n\n    static testSchedule() {\n        let testDelay = new TestDelay();\n        testDelay.schedule(testDelay.localScheduleHandler, 1, 8, 3); // 继承cc.Component则可使用\n\n        this.globalScheduler  = cc.director.getScheduler(); // director上计时器\n        this.globalScheduler.enableForTarget(testDelay);  // 必须 enableForTarget 注册id\n        this.globalScheduler.schedule(testDelay.globalScheduleHandler, testDelay, 1, cc.macro.REPEAT_FOREVER, 3, false);\n    }\n    private localScheduleHandler() {\n        this.scheduleIndex++;\n        console.log('LocalSchedule执行第' + this.scheduleIndex + '次');\n        if (this.scheduleIndex > 4) {\n            this.unschedule(this.localScheduleHandler);\n            TestDelay.globalScheduler.unschedule(this.globalScheduleHandler, this);\n            //TestDelay.globalScheduler.unscheduleAllForTarget(this);\n        }\n    }\n    private globalScheduleHandler() {\n        console.log('GlobalSchedule执行第' + this.scheduleIndex + '次');\n    }\n}\n// setTimeOut是延迟执行一次，setInterval是每间隔指定时间就执行一次\n// declare"]}